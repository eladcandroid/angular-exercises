<div class="analytics-container">
  <div class="analytics-header">
    <h2>×¡×˜×˜×™×¡×˜×™×§×•×ª ××•×¦×¨</h2>
    <span class="badge">âœ“ × ×˜×¢×Ÿ ×¢× ×ª× ××™! (Custom When Trigger)</span>
  </div>

  <!-- Key Metrics -->
  <div class="metrics-grid">
    <div class="metric-card views">
      <div class="metric-icon">ğŸ‘ï¸</div>
      <div class="metric-value">{{ views().toLocaleString() }}</div>
      <div class="metric-label">×¦×¤×™×•×ª</div>
    </div>

    <div class="metric-card purchases">
      <div class="metric-icon">ğŸ›’</div>
      <div class="metric-value">{{ purchases().toLocaleString() }}</div>
      <div class="metric-label">×¨×›×™×©×•×ª</div>
    </div>

    <div class="metric-card conversion">
      <div class="metric-icon">ğŸ“ˆ</div>
      <div class="metric-value">{{ conversionRate() }}%</div>
      <div class="metric-label">×”××¨×”</div>
    </div>

    <div class="metric-card stock">
      <div class="metric-icon">ğŸ“¦</div>
      <div class="metric-value">{{ stockLevel() }}</div>
      <div class="metric-label">×™×—×™×“×•×ª ×‘××œ××™</div>
    </div>
  </div>

  <!-- Monthly Sales Chart -->
  <div class="chart-section">
    <h3>××›×™×¨×•×ª ×—×•×“×©×™×•×ª (6 ×—×•×“×©×™× ××—×¨×•× ×™×)</h3>
    <div class="chart-container">
      @for (data of monthlyData(); track data.label) {
        <div class="chart-bar">
          <div
            class="bar-fill"
            [style.height.%]="getBarHeight(data.value)"
            [style.background]="data.color"
          >
            <span class="bar-value">{{ data.value }}</span>
          </div>
          <div class="bar-label">{{ data.label }}</div>
        </div>
      }
    </div>
  </div>

  <!-- Additional Info -->
  <div class="info-panel">
    <p><strong>ğŸ’¡ ×©×™××• ×œ×‘:</strong> × ×ª×•× ×™× ××œ×• ×–××™× ×™× ×¨×§ ×œ×× ×”×œ×™× ×•×”×§×•×“ ×”×•×¨×“ ××¨××© (prefetch when userIsAdmin)</p>
  </div>
</div>
